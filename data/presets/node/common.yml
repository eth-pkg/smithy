$id: common.yml
type: object
properties:
  acceptTermsOfUse:
    type: boolean
    default: false
    description: "Accept the terms of use"
  dataDir:
    type: string
    default: "{HOME}/{common.network}"
    description: "Base directory for storing Ethereum client data"
  engine:
    type: object
    required: [enabled, communication]
    properties:
      enabled:
        type: boolean
        default: true
        description: "Enable the Engine API"
      communication:
        type: object 
        required: [method]
        properties:
          method:
            type: string
            enum:
              - jwt
              - ipc
            default: "jwt"
            description: "Authentication method for Engine API communication"
            errorMessage:
              enum: "Engine communication method must be 'jwt' or 'ipc'"
          jwt:
            type: object
            properties:
              file:
                type: string
                default: "{common.dataDir}/{common.network.name}/engine.jwt"
                description: "Path to the JWT secret file for Engine API"
              id:
                type: string
                default: ""
                description: "JWT claims id for client identification"
          ipc:
            type: object
            properties:
              path:
                type: string
                default: "{common.dataDir}/{common.network.name}/engine.ipc"
                description: "Path to the IPC file for Engine API"
      api:
        type: object
        properties:
          port:
            type: number
            minimum: 1024
            maximum: 65535
            default: 8551
            description: "Port number for the Engine API"
            errorMessage:
              minimum: "Engine API port must be >= 1024"
              maximum: "Engine API port must be <= 65535"
          url:
            type: string
            default: "{common.engine.api.scheme}://{common.engine.api.host}:{common.engine.api.port}"
            description: "URL for the Engine API endpoint"
          host:
            type: string
            default: "localhost"
            description: "Hostname for the Engine API"
          allowlist:
            type: array
            items:
              type: string
            default: ["localhost"]
            description: "Allowed hostnames for the Engine API"
          ip:
            type: string
            pattern: "^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$"
            default: "127.0.0.1"
            description: "IP address for the Engine API"
            errorMessage:
              pattern: "Must be a valid IPv4 address"
          scheme:
            type: string
            enum:
              - http
              - https
            default: "http"
            description: "Protocol scheme for Engine API communication"
            errorMessage:
              enum: "Engine scheme must be either 'http' or 'https'"

  network:
    type: object
    properties:
      id:
        type: number
        minimum: 1
        default: 1
        description: "The Ethereum network ID (1 for mainnet, 11155111 for sepolia, etc.)"
        errorMessage:
          minimum: "Network ID must be a positive number"
      name:
        type: string
        enum:
          - mainnet
          - sepolia
          - holesky
          - hoodi
          - ephemery
          - custom
        default: "mainnet"
        description: "Ethereum network to connect to"
        errorMessage:
          enum: "Network must be one of: mainnet, sepolia, holesky, hoodi, ephemery, custom"
  operatingSystem:
    type: string
    enum:
      - linux
      - darwin
      - windows
    default: "linux"
    description: "Target operating system for client configuration"
    errorMessage:
      enum: "Operating system must be one of: linux, darwin, windows"
